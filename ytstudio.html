<script>
    // Get the query parameter value from the URL
    function getQueryParameter(name) {
        const urlSearchParams = new URLSearchParams(window.location.search);
        return urlSearchParams.get(name);
    }

    // Prefill the input fields with the query parameter value
    document.addEventListener('DOMContentLoaded', function() {
        const apiKeyInputs = document.querySelectorAll('[name="api_key"]');
        const apiKeyValue = getQueryParameter('apikey');
        if (apiKeyValue) {
            apiKeyInputs.forEach(function(input) {
                input.value = apiKeyValue;
            });
        }
    });
</script>

<a target="_blank" href="https://ry3yr.github.io/ytsearch">YT General Search</a>&nbsp;
<a target="_blank" href="https://ry3yr.github.io/OSTR/Diarykeepers_Homepage/ytchannelsearch-dkpr.html">YTChannel Search</a>&nbsp;
<a target="_blank" href="https://ry3yr.github.io/ytstudio">YTStudio Overview</a><br>

<!---LatestYTComments--->
    <!-- HTML form for API key and channel selection -->
    <form id="commentForm" method="POST">
        <label for="api_key">API Key:</label>
        <input type="text" name="api_key" id="api_key" value="">
        <label for="channel_id">Channel:</label>
        <select id="channel_id" name="channel_id" required>
           <option value="UCmIpOnd5BVx5Si2hp0WNKZw" selected>Repeekyraid_Cero</option>
            <option value="UCrltGih11A_Nayz6hG5XtIw">Diarykeeper</option>
            <option value="UCD7mRBujyxUResQ6jiiGypQ">PB</option>
        </select>
        <button type="submit">Fetch Comments</button>
    </form>
    <!-- Container to display the fetched comments -->
    <div id="commentsContainer"></div>
    <script>
        const form = document.getElementById('commentForm');
        const commentsContainer = document.getElementById('commentsContainer');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const apiKey = document.getElementById('api_key').value;
            const channelId = document.getElementById('channel_id').value;
            const apiUrl = `https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&allThreadsRelatedToChannelId=${channelId}&maxResults=6&order=time&key=${apiKey}`;
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                const comments = data.items;
                // Clear previous comments
                commentsContainer.innerHTML = '';
                // Display the fetched comments
                comments.forEach((comment) => {
                    const snippet = comment.snippet.topLevelComment.snippet;
                    const author = snippet.authorDisplayName;
                    const text = snippet.textDisplay;
                    const videoId = snippet.videoId;
                    const videoUrl = `https://www.youtube.com/watch?v=${videoId}`;
                    const commentElement = document.createElement('div');
                    commentElement.innerHTML = `
                        <p><strong>${author}</strong>: ${text}</p>
                        <p>From Video: <a href="${videoUrl}" target="_blank">${videoUrl}</a></p>
                    `;
                    commentsContainer.appendChild(commentElement);
                });
            } catch (error) {
                console.error('Error fetching comments:', error);
            }
        });
    </script>

<div class="pre-spoiler"><input name="Deutsch" type="button" onClick="if (this.parentNode.getElementsByTagName('div')[0].style.display != 'none') { this.parentNode.getElementsByTagName('div')[0].style.display = 'none'; this.value = 'YTCommentfind'; } else { this.parentNode.getElementsByTagName('div')[0].style.display = 'block'; this.value = 'YTCommentfind';}" value="YTCommentfind" style="background:white; border:black; color:black;"><div class="spoiler" style="display: none;" >
<a target="_blank" href="https://ytcomment.kmcat.uk/">alt</a><br>
<iframe src="data:text/html;base64,
Cgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+Cjxib2R5PgogICAgPGZvcm0gaWQ9InNlYXJjaEZvcm0iPgogICAgICAgIDxsYWJlbCBmb3I9Inl0dXJsIj5Zb3VUdWJlIFVSTDo8L2xhYmVsPgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ieXR1cmwiIG5hbWU9Inl0dXJsIiBwbGFjZWhvbGRlcj0iRW50ZXIgWW91VHViZSB2aWRlbyBVUkwiIHJlcXVpcmVkPjxicj4KICAgICAgICA8bGFiZWwgZm9yPSJrZXl3b3JkIj5LZXl3b3JkOjwvbGFiZWw+CiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJrZXl3b3JkIiBuYW1lPSJrZXl3b3JkIiBwbGFjZWhvbGRlcj0iRW50ZXIgeXQgY29tbWVudCBrZXl3b3JkIiByZXF1aXJlZD48YnI+CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiPlNlYXJjaDwvYnV0dG9uPgogICAgPC9mb3JtPgogICAgPGRpdiBpZD0iY29tbWVudHNDb250YWluZXIiPgogICAgICAgIDx1bCBpZD0iY29tbWVudHNMaXN0Ij48L3VsPgogICAgPC9kaXY+CiAgICA8c2NyaXB0PgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hGb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHZhciB2aWRlb1VybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5dHVybCcpLnZhbHVlOwogICAgICAgICAgICB2YXIga2V5d29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrZXl3b3JkJykudmFsdWU7CiAgICAgICAgICAgIGZpbmRZb3VUdWJlQ29tbWVudHModmlkZW9VcmwsIGtleXdvcmQpOwogICAgICAgIH0pOwogICAgICAgIGZ1bmN0aW9uIGZpbmRZb3VUdWJlQ29tbWVudHModmlkZW9VcmwsIGtleXdvcmQpIHsKICAgICAgICAgICAgdmFyIHZpZGVvSWQgPSBnZXRWaWRlb0lkRnJvbVVybCh2aWRlb1VybCk7CiAgICAgICAgICAgIHZhciBhcGlLZXkgPSBhdG9iKCdRVWw2WVZONVFVMUpOV2xGTm05VmVtbzFjV0ZFYTNkRGVWOVpTMGcxY1dwRVIwWjVTM2swJyk7CiAgICAgICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9jb21tZW50VGhyZWFkcz9wYXJ0PXNuaXBwZXQmbWF4UmVzdWx0cz0xMCZ2aWRlb0lkPScgKyB2aWRlb0lkICsgJyZzZWFyY2hUZXJtcz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleXdvcmQpICsgJyZrZXk9JyArIGFwaUtleTsKICAgICAgICAgICAgZmV0Y2godXJsKQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlDb21tZW50cyhkYXRhLml0ZW1zKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5Q29tbWVudHMoaXRlbXMpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50c0xpc3QnKTsKICAgICAgICAgICAgY29tbWVudHNMaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBjb21tZW50c0xpc3QuaW5uZXJIVE1MID0gJzxsaT5ObyBjb21tZW50cyBmb3VuZC48L2xpPic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRJZCA9IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBpdGVtLnNuaXBwZXQudG9wTGV2ZWxDb21tZW50LnNuaXBwZXQudGV4dERpc3BsYXk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRVcmwgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0nICsgaXRlbS5zbmlwcGV0LnZpZGVvSWQgKyAnJmdvb2dsZV9jb21tZW50X2lkPScgKyBjb21tZW50SWQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5pbm5lckhUTUwgPSAnPGEgaHJlZj0iJyArIGNvbW1lbnRVcmwgKyAnIj4nICsgY29tbWVudCArICc8L2E+JzsKICAgICAgICAgICAgICAgICAgICBjb21tZW50c0xpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZ2V0VmlkZW9JZEZyb21VcmwodXJsKSB7CiAgICAgICAgICAgIHZhciB2aWRlb0lkID0gJyc7CiAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gLyg/Olw/dj18XC9lbWJlZFwvfFwvXGRcL3xcL3ZpXC98XC92XC98aHR0cHM/OlwvXC8oPzp3d3dcLik/eW91dHViZVwuY29tXC92XC98aHR0cHM/OlwvXC8oPzp3d3dcLik/eW91dHViZVwuY29tXC9lbWJlZFwvfGh0dHBzPzpcL1wveW91dHVcLmJlXC98aHR0cHM/OlwvXC8oPzp3d3dcLik/eW91dHViZVwuY29tXC91c2VyXC9bXiNcL10rI3BcL1teI1wvXStcL3xodHRwcz86XC9cLyg/Ond3d1wuKT95b3V0dWJlXC5jb21cL3NbXiNcL10rXC98aHR0cHM/OlwvXC8oPzp3d3dcLik/eW91dHViZVwuY29tXC9wbGF5bGlzdFw/KShbXiNcJlw/XC9dKykvOwogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHVybC5tYXRjaChwYXR0ZXJuKTsKICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICB2aWRlb0lkID0gbWF0Y2hlc1sxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdmlkZW9JZDsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+
" style="border:0px #ffffff none;" name="statusit" scrolling="auto" frameborder="0" marginheight="0px" marginwidth="0px" height="350px" width="500px" allowfullscreen></iframe></div>

<!DOCTYPE html>
<html>
<head>
    <title>YouTube Channel Videos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
        }

        form {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,.1);
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        select,
        input[type="text"],
        button {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 20px;
            font-size: 14px;
        }

        input[type="checkbox"],
        label[for="show_thumbnail"] {
            display: inline;
            margin-right: 5px;
        }

        button[type="submit"] {
            background-color: #4CAF50;
            color: #fff;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- HTML form -->
    <form method="POST" action="">
        <label for="channel_id">Channel ID:</label>
        <select id="channel_id" name="channel_id" required>
            <option value="UCrltGih11A_Nayz6hG5XtIw">Diarykeeper</option>
            <option value="UCmIpOnd5BVx5Si2hp0WNKZw" selected>Repeekyraid_Cero</option>
        </select>
        <label for="api_key">API Key:</label>
        <input type="text" id="api_key" name="api_key" required>
        <input type="checkbox" id="show_thumbnail" name="show_thumbnail">
        <label for="show_thumbnail">Show Thumbnail</label><br>
        <button type="submit">Get Channel Videos</button>
    </form>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var form = document.querySelector('form');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    var channelId = document.getElementById('channel_id').value;
    var apiKey = document.getElementById('api_key').value;

    var url = `https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=${channelId}&key=${apiKey}`;

    fetch(url)
      .then(function(response) {
        if (!response.ok) {
          throw new Error('Error: cURL request failed');
        }
        return response.json();
      })
      .then(function(data) {
        var uploadsPlaylistId = data.items[0].contentDetails.relatedPlaylists.uploads;
        var playlistUrl = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${uploadsPlaylistId}&key=${apiKey}`;

        return fetch(playlistUrl);
      })
      .then(function(playlistResponse) {
        if (!playlistResponse.ok) {
          throw new Error('Error: cURL playlist request failed');
        }
        return playlistResponse.json();
      })
      .then(function(playlistData) {
        var items = playlistData.items;

        items.forEach(function(item) {
  var videoId = item.snippet.resourceId.videoId;
  var videoTitle = item.snippet.title;
  var videoThumbnail = item.snippet.thumbnails.default.url;
  var videoPublishedAt = item.snippet.publishedAt;

  var videoContainer = document.createElement('div');

  if (document.getElementById('show_thumbnail').checked) {
    var thumbnailImg = document.createElement('img');
    thumbnailImg.src = videoThumbnail;
    thumbnailImg.alt = 'Thumbnail';
    videoContainer.appendChild(thumbnailImg);
  }

  var videoLink = document.createElement('a');
  videoLink.href = `https://www.youtube.com/watch?v=${videoId}`;
  videoLink.textContent = videoTitle;
  videoContainer.appendChild(videoLink);

  var videoIdText = document.createElement('p');
  videoIdText.textContent = 'Video ID: ' + videoId;
  videoContainer.appendChild(videoIdText);

  var uploadDateText = document.createElement('p');
  uploadDateText.textContent = 'Upload Date: ' + videoPublishedAt;
  videoContainer.appendChild(uploadDateText);

  var commentsUrl = `https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&maxResults=5&videoId=${videoId}&key=${apiKey}`;

  fetch(commentsUrl)
    .then(function(commentsResponse) {
      if (!commentsResponse.ok) {
        throw new Error('Error: cURL comments request failed');
      }
      return commentsResponse.json();
    })
    .then(function(commentsData) {
      var comments = commentsData.items;

      comments.forEach(function(comment) {
        var commentText = document.createElement('p');
        commentText.textContent = 'Comment: ' + comment.snippet.topLevelComment.snippet.textDisplay;
        videoContainer.appendChild(commentText);
      });
    })
    .catch(function(error) {
      console.error(error);
    });

  var videoRatingUrl = `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoId}&key=${apiKey}`;

  fetch(videoRatingUrl)
    .then(function(ratingResponse) {
      if (!ratingResponse.ok) {
        throw new Error('Error: cURL rating request failed');
      }
      return ratingResponse.json();
    })
    .then(function(ratingData) {
      var statistics = ratingData.items[0].statistics;
      var likeCount = statistics.likeCount;
      var dislikeCount = statistics.dislikeCount;

      var ratingText = document.createElement('p');
      //ratingText.textContent = 'Rating: ' + likeCount + ' likes, '';
      ratingText.textContent = 'Rating: ' + likeCount + ' likes, ' + dislikeCount + ' dislikes';
      videoContainer.appendChild(ratingText);
    })
    .catch(function(error) {
      console.error(error);
    });

  document.body.appendChild(videoContainer);
        });
      })
      .catch(function(error) {
        console.error(error);
      });
  });
});
</script>
