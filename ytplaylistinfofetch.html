<a target="_blank" href="https://ry3yr.github.io/yt" style=color:gray>YT Link Relay</a><br><a target="_blank" href="https://ry3yr.github.io/ytsearch">YT General Search</a><br><a target="_blank" href="https://ry3yr.github.io/OSTR/Diarykeepers_Homepage/ytchannelsearch-dkpr.html">YTChannel Search</a><br><a target="_blank" href="https://ry3yr.github.io/ytstudio">YTStudio Overview</a><br><a target="_blank" href="ytplaylists.html" style=color:blue>ytplaylists</a><br>

    <style>
        table{border-collapse:collapse;width:100%}td,th{text-align:left;padding:8px;border-bottom:1px solid #ddd}th{background-color:#f2f2f2}
    </style>
</head>
<body>
    <form id="playlistForm">
        <label for="playlistInput">YouTube Playlist URL:</label>
        <input type="text" id="playlistInput" required>
        <br>
        <label for="apiKeyInput">YouTube API Key:</label>
        <input type="text" id="apiKeyInput" required>
        <br>
        <input type="submit" value="Get Video List">
    </form>
    <table id="videoTable">
        <thead>
            <tr>
                <th>Video Name</th>
                <th>Playtime</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody id="videoList"></tbody>
    </table>
    <script>
        function convertDuration(duration) {
            var match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
            var hours = (parseInt(match[1]) || 0);
            var minutes = (parseInt(match[2]) || 0);
            var seconds = (parseInt(match[3]) || 0);
            return hours + "h " + minutes + "m " + seconds + "s";}
        function convertDate(date) {
            var isoDate = new Date(date);
            return isoDate.toDateString();}
        document.getElementById("playlistForm").addEventListener("submit", function (event) {
  event.preventDefault();
  var playlistUrl = document.getElementById("playlistInput").value;
  var apiKey = document.getElementById("apiKeyInput").value;
  var playlistId = playlistUrl.match(/(?:list=)([\w-]+)/)[1];
  var apiUrl = "https://www.googleapis.com/youtube/v3/playlistItems";
  var params = {
    part: "snippet,contentDetails",
    maxResults: 50,
    playlistId: playlistId,
    key: apiKey,
  };
  var url =
    apiUrl +
    "?" +
    Object.keys(params)
      .map(function (key) {
        return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]);
      })
      .join("&");
  fetch(url)
    .then((response) => response.json())
    .then((data) => {
      var videoList = document.getElementById("videoList");
      videoList.innerHTML = "";
      var videoItems = [];
      var totalDuration = 0; // Variable to store the total playtime
      data.items.forEach(function (item) {
        var videoId = item.contentDetails.videoId;
        var videoTitle = item.snippet.title;
        var vId = item.contentDetails.videoId;
        var durUrl =
          "https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=" +
          vId +
          "&key=" +
          apiKey;
        fetch(durUrl)
          .then((response) => response.json())
          .then((durationData) => {
            var duration = durationData.items[0].contentDetails.duration;
            var videoDuration = convertDuration(duration);
            var videoDate = item.snippet.publishedAt;
            var videoDateFormatted = convertDate(videoDate);
            videoItems.push({
              videoId: videoId,
              videoTitle: videoTitle,
              videoDuration: videoDuration,
              videoDate: videoDateFormatted,
            });
            // Accumulate the playtime
            totalDuration += getDurationInSeconds(duration);
            if (videoItems.length === data.items.length) {
              videoItems.sort(
                (a, b) => new Date(a.videoDate) - new Date(b.videoDate)
              );
              videoItems.forEach(function (video) {
                var videoRow = document.createElement("tr");
                var videoNameCell = document.createElement("td");
                var videoNameLink = document.createElement("a");
                videoNameLink.href =
                  "https://www.youtube.com/watch?v=" + video.videoId;
                videoNameLink.target = "_blank";
                videoNameLink.textContent = video.videoTitle;
                videoNameCell.appendChild(videoNameLink);
                videoRow.appendChild(videoNameCell);
                var playtimeCell = document.createElement("td");
                playtimeCell.textContent = video.videoDuration;
                videoRow.appendChild(playtimeCell);
                var dateCell = document.createElement("td");
                dateCell.textContent = video.videoDate;
                videoRow.appendChild(dateCell);
                videoList.appendChild(videoRow);
              });
              // Add total playtime row
              var totalDurationRow = document.createElement("tr");
              var totalDurationCell = document.createElement("td");
              totalDurationCell.setAttribute("colspan", "2");
              totalDurationCell.textContent =
                "Total Playtime: " + convertSecondsToDuration(totalDuration);
              totalDurationRow.appendChild(totalDurationCell);
              videoList.appendChild(totalDurationRow);
            }
          })
          .catch((error) => {
            console.log(error);
            var videoTable = document.getElementById("videoTable");
            videoTable.innerHTML = "An error occurred while fetching the video list.";
          });
      });
    })
    .catch((error) => {
      console.log(error);
      var videoTable = document.getElementById("videoTable");
      videoTable.innerHTML = "An error occurred while fetching the video list.";
    });
});

// Helper function to convert YouTube duration format to seconds
function getDurationInSeconds(duration) {
  var match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
  var hours = parseInt(match[1]) || 0;
  var minutes = parseInt(match[2]) || 0;
  var seconds = parseInt(match[3]) || 0;
  return hours * 3600 + minutes * 60 + seconds;
}

// Helper function to convert seconds to YouTube duration format
function convertSecondsToDuration(seconds) {
  var hours = Math.floor(seconds / 3600);
  var minutes = Math.floor((seconds % 3600) / 60);
  var secs = seconds % 60;
  return hours.toString().padStart(2, "0") + "h " + minutes.toString().padStart(2, "0") + "m " + secs.toString().padStart(2, "0") + "s";
}
    </script>
</body>
</html>
<!---https://stackoverflow.com/questions/15596753/how-do-i-get-video-durations-with-youtube-api-version-3--->
<!---
ICAgIDxzdHlsZT4KICAgICAgICB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJX10ZCx0aHt0ZXh0LWFsaWduOmxlZnQ7cGFkZGluZzo4cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RkZH10aHtiYWNrZ3JvdW5kLWNvbG9yOiNmMmYyZjJ9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGZvcm0gaWQ9InBsYXlsaXN0Rm9ybSI+CiAgICAgICAgPGxhYmVsIGZvcj0icGxheWxpc3RJbnB1dCI+WW91VHViZSBQbGF5bGlzdCBVUkw6PC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InBsYXlsaXN0SW5wdXQiIHJlcXVpcmVkPgogICAgICAgIDxicj4KICAgICAgICA8bGFiZWwgZm9yPSJhcGlLZXlJbnB1dCI+WW91VHViZSBBUEkgS2V5OjwvbGFiZWw+CiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJhcGlLZXlJbnB1dCIgcmVxdWlyZWQ+CiAgICAgICAgPGJyPgogICAgICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJHZXQgVmlkZW8gTGlzdCI+CiAgICA8L2Zvcm0+CiAgICA8dGFibGUgaWQ9InZpZGVvVGFibGUiPgogICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRoPlZpZGVvIE5hbWU8L3RoPgogICAgICAgICAgICAgICAgPHRoPlBsYXl0aW1lPC90aD4KICAgICAgICAgICAgICAgIDx0aD5EYXRlPC90aD4KICAgICAgICAgICAgPC90cj4KICAgICAgICA8L3RoZWFkPgogICAgICAgIDx0Ym9keSBpZD0idmlkZW9MaXN0Ij48L3Rib2R5PgogICAgPC90YWJsZT4KICAgIDxzY3JpcHQ+CiAgICAgICAgZnVuY3Rpb24gY29udmVydER1cmF0aW9uKGR1cmF0aW9uKSB7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IGR1cmF0aW9uLm1hdGNoKC9QVChcZCtIKT8oXGQrTSk/KFxkK1MpPy8pOwogICAgICAgICAgICB2YXIgaG91cnMgPSAocGFyc2VJbnQobWF0Y2hbMV0pIHx8IDApOwogICAgICAgICAgICB2YXIgbWludXRlcyA9IChwYXJzZUludChtYXRjaFsyXSkgfHwgMCk7CiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gKHBhcnNlSW50KG1hdGNoWzNdKSB8fCAwKTsKICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgImggIiArIG1pbnV0ZXMgKyAibSAiICsgc2Vjb25kcyArICJzIjt9CiAgICAgICAgZnVuY3Rpb24gY29udmVydERhdGUoZGF0ZSkgewogICAgICAgICAgICB2YXIgaXNvRGF0ZSA9IG5ldyBEYXRlKGRhdGUpOwogICAgICAgICAgICByZXR1cm4gaXNvRGF0ZS50b0RhdGVTdHJpbmcoKTt9CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXlsaXN0Rm9ybSIpLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHZhciBwbGF5bGlzdFVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5bGlzdElucHV0IikudmFsdWU7CiAgICAgICAgICAgIHZhciBhcGlLZXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBpS2V5SW5wdXQiKS52YWx1ZTsKICAgICAgICAgICAgdmFyIHBsYXlsaXN0SWQgPSBwbGF5bGlzdFVybC5tYXRjaCgvKD86bGlzdD0pKFtcdy1dKykvKVsxXTsKICAgICAgICAgICAgdmFyIGFwaVVybCA9ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3BsYXlsaXN0SXRlbXMiOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgcGFydDogInNuaXBwZXQsY29udGVudERldGFpbHMiLAogICAgICAgICAgICAgICAgbWF4UmVzdWx0czogNTAsCiAgICAgICAgICAgICAgICBwbGF5bGlzdElkOiBwbGF5bGlzdElkLAogICAgICAgICAgICAgICAga2V5OiBhcGlLZXl9OwogICAgICAgICAgICB2YXIgdXJsID0gYXBpVXJsICsgIj8iICsgT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pOwogICAgICAgICAgICB9KS5qb2luKCImIik7CiAgICAgICAgICAgIGZldGNoKHVybCkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlkZW9MaXN0Iik7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9MaXN0LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb0l0ZW1zID0gW107CiAgICAgICAgICAgICAgICAgICAgZGF0YS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvSWQgPSBpdGVtLmNvbnRlbnREZXRhaWxzLnZpZGVvSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb1RpdGxlID0gaXRlbS5zbmlwcGV0LnRpdGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdklkID0gaXRlbS5jb250ZW50RGV0YWlscy52aWRlb0lkOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVyVXJsID0gImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvdmlkZW9zP3BhcnQ9Y29udGVudERldGFpbHMmaWQ9IiArIHZJZCArICIma2V5PSIgKyBhcGlLZXk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKGR1clVybCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGR1cmF0aW9uRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gZHVyYXRpb25EYXRhLml0ZW1zWzBdLmNvbnRlbnREZXRhaWxzLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb0R1cmF0aW9uID0gY29udmVydER1cmF0aW9uKGR1cmF0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW9EYXRlID0gaXRlbS5zbmlwcGV0LnB1Ymxpc2hlZEF0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb0RhdGVGb3JtYXR0ZWQgPSBjb252ZXJ0RGF0ZSh2aWRlb0RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6IHZpZGVvSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvVGl0bGU6IHZpZGVvVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRHVyYXRpb246IHZpZGVvRHVyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRGF0ZTogdmlkZW9EYXRlRm9ybWF0dGVkfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZGVvSXRlbXMubGVuZ3RoID09PSBkYXRhLml0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0l0ZW1zLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGEudmlkZW9EYXRlKSAtIG5ldyBEYXRlKGIudmlkZW9EYXRlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSXRlbXMuZm9yRWFjaChmdW5jdGlvbih2aWRlbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb05hbWVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb05hbWVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9OYW1lTGluay5ocmVmID0gImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9IiArIHZpZGVvLnZpZGVvSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb05hbWVMaW5rLnRleHRDb250ZW50ID0gdmlkZW8udmlkZW9UaXRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTmFtZUNlbGwuYXBwZW5kQ2hpbGQodmlkZW9OYW1lTGluayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1Jvdy5hcHBlbmRDaGlsZCh2aWRlb05hbWVDZWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5dGltZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheXRpbWVDZWxsLnRleHRDb250ZW50ID0gdmlkZW8udmlkZW9EdXJhdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvUm93LmFwcGVuZENoaWxkKHBsYXl0aW1lQ2VsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUNlbGwudGV4dENvbnRlbnQgPSB2aWRlby52aWRlb0RhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1Jvdy5hcHBlbmRDaGlsZChkYXRlQ2VsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0xpc3QuYXBwZW5kQ2hpbGQodmlkZW9Sb3cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTt9fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlkZW9UYWJsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1RhYmxlLmlubmVySFRNTCA9ICJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyB0aGUgdmlkZW8gbGlzdC4iO30pO30pO30pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW9UYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlb1RhYmxlIik7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9UYWJsZS5pbm5lckhUTUwgPSAiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGhlIHZpZGVvIGxpc3QuIjt9KTt9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=
-->



<!--plaintext-copytable-
<script>
function copyTableToClipboard() {
    var table = document.getElementById("videoTable");
    var range = document.createRange();
    range.selectNode(table);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand("copy");
    window.getSelection().removeAllRanges();}
var copyButton = document.createElement("button");
copyButton.textContent = "Copy Table";
copyButton.addEventListener("click", copyTableToClipboard);
document.body.appendChild(copyButton);
</script>-->


<script>
function copyTableToClipboard() {
    var table = document.getElementById("videoTable");
    var tableHtml = table.outerHTML;
    var tempElement = document.createElement("textarea");
    tempElement.value = tableHtml;
    document.body.appendChild(tempElement);
    tempElement.select();
    document.execCommand("copy");
    document.body.removeChild(tempElement);
    alert("Table copied to clipboard as HTML!");
}

var copyButton = document.createElement("button");
copyButton.textContent = "Copy Table";
copyButton.addEventListener("click", copyTableToClipboard);
document.body.appendChild(copyButton);
</script>


