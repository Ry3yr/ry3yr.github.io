mtdapiposter.html?user=USERID&apikey=APIKEY&instanceurl=https://mastodon.social/api/v1/statuses&value=BASE64ENCODEDMESSAGE

<div id="postInfo"></div>
<script>
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const instanceurl = urlParams.get('instanceurl');
  const user = urlParams.get('user');
  const apikey = urlParams.get('apikey');
  const encodedValue = urlParams.get('value');
  const encoding = urlParams.get('encoding') || 'base64'; // Retrieve the encoding value or use 'base64' as default
  let decodedValue;
  if (encoding === 'base64') {
    decodedValue = atob(encodedValue); // Use base64 decoding if encoding is 'base64'
  } else {
    decodedValue = decodeURIComponent(encodedValue); // Use URI decoding for other encoding schemes
  }
  const apiUrl = `${instanceurl}`;
  //const apiUrl = `${instanceurl}/api/v1/statuses`;
  const userId = user;
  const apiKey = apikey;
  const postData = {
    status: decodedValue,
  };
  const postInfoDiv = document.getElementById('postInfo');
  fetch(apiUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${apiKey}`,
    },
    body: JSON.stringify(postData),
  })
    .then(response => {
      if (!response.ok) {
        throw new Error('Error creating post: ' + response.status);
      }
      return response.json();
    })
    .then(data => {
      console.log('Post created successfully:', data);
      postInfoDiv.innerText = JSON.stringify(data);
    })
    .catch(error => {
      console.error('Error creating post:', error);
      postInfoDiv.innerText = 'Error creating post: ' + error;
    });
</script>


<!---CiAgPGRpdiBpZD0icG9zdEluZm8iPjwvZGl2PgoKICA8c2NyaXB0PgogICAgY29uc3QgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoOwogICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7CiAgICBjb25zdCBpbnN0YW5jZXVybCA9IHVybFBhcmFtcy5nZXQoJ2luc3RhbmNldXJsJyk7CiAgICBjb25zdCB1c2VyID0gdXJsUGFyYW1zLmdldCgndXNlcicpOwogICAgY29uc3QgYXBpa2V5ID0gdXJsUGFyYW1zLmdldCgnYXBpa2V5Jyk7CiAgICBjb25zdCBlbmNvZGVkVmFsdWUgPSB1cmxQYXJhbXMuZ2V0KCd2YWx1ZScpOwogICAgY29uc3QgZGVjb2RlZFZhbHVlID0gYXRvYihlbmNvZGVkVmFsdWUpOwogICAgY29uc3QgYXBpVXJsID0gYCR7aW5zdGFuY2V1cmx9YDsKICAgIC8vY29uc3QgYXBpVXJsID0gYCR7aW5zdGFuY2V1cmx9L2FwaS92MS9zdGF0dXNlc2A7CiAgICBjb25zdCB1c2VySWQgPSB1c2VyOwogICAgY29uc3QgYXBpS2V5ID0gYXBpa2V5OwogICAgY29uc3QgcG9zdERhdGEgPSB7CiAgICAgIHN0YXR1czogZGVjb2RlZFZhbHVlLAogICAgfTsKCiAgICBmZXRjaChhcGlVcmwsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gLAogICAgICB9LAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSksCiAgICB9KQogICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdQb3N0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEpOwogICAgICAgIGNvbnN0IHBvc3RJbmZvRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvc3RJbmZvJyk7CiAgICAgICAgcG9zdEluZm9EaXYuaW5uZXJUZXh0ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcG9zdDonLCBlcnJvcik7CiAgICAgIH0pOwogIDwvc2NyaXB0Pg==
-->

<!----Poster--->
<!---
PGRpdiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlOyI+CiAgPHRleHRhcmVhIGlkPSJvdXRwdXRUZXh0YXJlYSIgcm93cz0iMTAiIGNvbHM9IjUwIj48L3RleHRhcmVhPgogIDxwIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogLTIwcHg7Ij5DaGFyYWN0ZXIgQ291bnQ6IDxzcGFuIGlkPSJjaGFyYWN0ZXJDb3VudCI+MDwvc3Bhbj48L3A+CjwvZGl2Pgo8YnV0dG9uIG9uY2xpY2s9ImZldGNoRGF0YSgpIj5Qb3N0VG9NVEQ8L2J1dHRvbj4KPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idXRmOENoZWNrYm94Ij4gVVRGLTgKPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZW5jb2RldXJpQ2hlY2tib3giIGNoZWNrZWQ+IGVuY29kZWR1cmkKPHNjcmlwdD4KICBmdW5jdGlvbiBkaXNwbGF5RGF0YSgpIHsKICAgIGZldGNoKCdodHRwczovL2FsY2Vhd2lzLmRlL290aGVyL2V4dHJhL3NjcmlwdHMvZmFrZXNvY2lhbG1lZGlhL2RhdGFfYWxjZWEuanNvbicpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgbGV0IHRhcmdldEluZGV4ID0gMTsgLy8gQ2hhbmdlIHRoaXMgdmFsdWUgdG8gdGFyZ2V0IGEgZGlmZmVyZW50IHBvc2l0aW9uIChzdGFydGluZyBmcm9tIDEpCiAgICAgICAgaWYgKHRhcmdldEluZGV4ID49IDEgJiYgdGFyZ2V0SW5kZXggPD0gZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IHRhcmdldE9iamVjdCA9IGRhdGFbdGFyZ2V0SW5kZXggLSAxXTsKICAgICAgICAgIGNvbnN0IHRhcmdldEtleSA9IE9iamVjdC5rZXlzKHRhcmdldE9iamVjdClbMF07CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldE9iamVjdFt0YXJnZXRLZXldLnZhbHVlOwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFRleHRhcmVhJykudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXBsYWNlQnV0dG9uJykuY2xpY2soKTsKICAgICAgICAgIC8vIENhbGwgY291bnRDaGFyYWN0ZXJzIGFmdGVyIHNldHRpbmcgdGhlIHRleHRhcmVhIHZhbHVlCiAgICAgICAgICBjb3VudENoYXJhY3RlcnMoKTsKICAgICAgICB9CiAgICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gY291bnRDaGFyYWN0ZXJzKCkgewogICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0VGV4dGFyZWEnKTsKICAgIGNvbnN0IGNoYXJhY3RlckNvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJhY3RlckNvdW50Jyk7CiAgICBjb25zdCB0ZXh0ID0gdGV4dGFyZWEudmFsdWU7CiAgICBjb25zdCBjb3VudCA9IHRleHQubGVuZ3RoOwogICAgY2hhcmFjdGVyQ291bnQudGV4dENvbnRlbnQgPSBjb3VudDsKICB9CgogIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgIHZhciB1c2VyID0gIjExMTk1ODU0NjA2MjI5NzY0NiI7CiAgICB2YXIgYXBpa2V5ID0gIlkiOwogICAgdmFyIGluc3RhbmNldXJsID0gImh0dHBzOi8vbWFzLnRvL2FwaS92MS9zdGF0dXNlcyI7CiAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUZXh0YXJlYScpOwogICAgY29uc3QgdmFsdWUgPSB0ZXh0YXJlYS52YWx1ZTsKICAgIGNvbnN0IHV0ZjhDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1dGY4Q2hlY2tib3gnKTsKICAgIGNvbnN0IGVuY29kZXVyaUNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuY29kZXVyaUNoZWNrYm94Jyk7CiAgICBsZXQgcHJvY2Vzc2VkVmFsdWU7CiAgICBsZXQgdXJsID0gYC9tdGRhcGlwb3N0ZXIuaHRtbD91c2VyPSR7dXNlcn0mYXBpa2V5PSR7YXBpa2V5fSZpbnN0YW5jZXVybD0ke2luc3RhbmNldXJsfSZ2YWx1ZT1gOwogICAgaWYgKHV0ZjhDaGVja2JveC5jaGVja2VkKSB7CiAgICAgIC8vIFByb2Nlc3MgdGhlIGNvbnRlbnQgYXMgVVRGLTgKICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpOwogICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUodmFsdWUpOwogICAgICBwcm9jZXNzZWRWYWx1ZSA9IEFycmF5LmZyb20oZGF0YSkubWFwKGJ5dGUgPT4gJyUnICsgYnl0ZS50b1N0cmluZygxNikpLmpvaW4oJycpOwogICAgICB1cmwgKz0gcHJvY2Vzc2VkVmFsdWUgKyAnJmVuY29kaW5nPXV0ZjgnOwogICAgfSBlbHNlIGlmIChlbmNvZGV1cmlDaGVja2JveC5jaGVja2VkKSB7CiAgICAgIC8vIFByb2Nlc3MgdGhlIGNvbnRlbnQgYXMgZW5jb2RlZHVyaQogICAgICBwcm9jZXNzZWRWYWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAgICAgIHVybCArPSBwcm9jZXNzZWRWYWx1ZSArICcmZW5jb2Rpbmc9ZW5jb2RldXJpJzsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFByb2Nlc3MgdGhlIGNvbnRlbnQgYXMgQmFzZTY0CiAgICAgIHByb2Nlc3NlZFZhbHVlID0gYnRvYSh2YWx1ZSk7CiAgICAgIHVybCArPSBwcm9jZXNzZWRWYWx1ZTsKICAgIH0KICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpOwogIH0KCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFRleHRhcmVhJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjb3VudENoYXJhY3RlcnMpOwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBkaXNwbGF5RGF0YSk7Cjwvc2NyaXB0PgoKPGJ1dHRvbiBpZD0icmVwbGFjZUJ1dHRvbiI+QXJ1c2VhPC9idXR0b24+CjxzY3JpcHQ+CmZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkgewogIHZhciB0ZXh0RmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3V0cHV0VGV4dGFyZWEiKTsKICB2YXIgbmV3VGV4dCA9IHRleHRGaWVsZC52YWx1ZS5yZXBsYWNlKC9BbGNlYS9naSwgImFydXNlYSIpO3RleHRGaWVsZC52YWx1ZSA9IG5ld1RleHQ7fQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVwbGFjZUJ1dHRvbiIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgcmVwbGFjZVRleHQpOwo8L3NjcmlwdD4KCgo8YnV0dG9uIGlkPSJNVERDbGFzc2ljU2hhcmUiIG9uY2xpY2s9InJlcGxhY2VtdGRUZXh0KCkiPlJlZ3VsYXIgcG9zdDwvYnV0dG9uPgo8c2NyaXB0PgpmdW5jdGlvbiByZXBsYWNlbXRkVGV4dCgpIHsKICB2YXIgdGV4dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm91dHB1dFRleHRhcmVhIik7CiAgdmFyIGVuY29kZWR0ZXh0VmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodGV4dEZpZWxkLnZhbHVlKTsKICB2YXIgc2hhcmVVcmwgPSAiaHR0cHM6Ly9tYXMudG8vc2hhcmU/dGV4dD0iICsgZW5jb2RlZHRleHRWYWx1ZTsKICB3aW5kb3cub3BlbihzaGFyZVVybCwgIl9ibGFuayIpOwp9Cjwvc2NyaXB0Pgo=
-->

